<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An Extensible Approach to Flux Balance Analysis â€¢ fbar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="An Extensible Approach to Flux Balance Analysis">
<meta property="og:description" content="A simple package for Flux Balance Analysis and related
    metabolic modeling techniques. Functions are provided for: parsing
    models in tabular format, converting parsed metabolic models to input
    formats for common linear programming solvers, and
    evaluating and applying gene-protein-reaction mappings. In addition, there
    are wrappers to parse a model, select a solver, find the metabolic fluxes,
    and return the results applied to the original model. Compared to other
    packages in this field, this package puts a much heavier focus on
    providing reusable components that can be used in the design of new
    implementation of new techniques, in particular those that involve large
    parameter sweeps.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">fbar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Introduction.html">Introduction</a>
    </li>
    <li>
      <a href="articles/Multi-Objective_Optimization_case_study.html">Multi-Objective Optimization case study</a>
    </li>
    <li>
      <a href="articles/Tutorial.html">Tutorial</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/maxconway/fbar/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<hr>
<div id="output-github_document" class="section level2">
<h2 class="hasAnchor">
<a href="#output-github_document" class="anchor"></a>output: github_document</h2>
<!-- README.md is generated from README.Rmd. Please edit that file -->
</div>
<div id="fbar" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#fbar" class="anchor"></a>fbar</h1></div>

<p><code>fbar</code> is a simple, easy to use Flux Balance Analysis package with a tidy data approach. Just <code>data_frames</code> and the occasional <code>list</code>, no new classes to learn. The focus is on simplicity and speed. Models are expected as a flat table, and results can be simply appended to the table. This makes this package very suitable for useage in pipelines with pre- and post- processing of models and results, so that it works well as a backbone for customized methods. Loading, parsing and evaluating a model takes around 0.1s, which, together with the straightforward data structures used, makes this library very suitable for large parameter sweeps.</p>
<div id="a-simple-example" class="section level2">
<h2 class="hasAnchor">
<a href="#a-simple-example" class="anchor"></a>A Simple Example</h2>
<p>This example calculates the fluxes for the model ecoli_core. Ecoli_core starts out as a data frame, and is returned as the same data frame, with fluxes appended.</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">fbar</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">ecoli_core</span>)

<span class="fu"><a href="https://rdrr.io/r/base/try.html">try</a></span>({ <span class="co"># this will fail if no appropriate solver is available.</span>
  <span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ROI.plugin.ecos</span>)

  <span class="no">ecoli_core_with_flux</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/find_fluxes_df.html">find_fluxes_df</a></span>(<span class="no">ecoli_core</span>)
})
<span class="co">#&gt; Warning: `as_data_frame()` is deprecated as of tibble 2.0.0.</span>
<span class="co">#&gt; Please use `as_tibble()` instead.</span>
<span class="co">#&gt; The signature and semantics have changed, see `?as_tibble`.</span>
<span class="co">#&gt; This warning is displayed once every 8 hours.</span>
<span class="co">#&gt; Call `lifecycle::last_warnings()` to see where this warning was generated.</span>
<span class="co">#&gt; Warning: `data_frame()` is deprecated as of tibble 1.1.0.</span>
<span class="co">#&gt; Please use `tibble()` instead.</span>
<span class="co">#&gt; This warning is displayed once every 8 hours.</span>
<span class="co">#&gt; Call `lifecycle::last_warnings()` to see where this warning was generated.</span></pre></div>
</div>
<div id="a-complicated-example" class="section level2">
<h2 class="hasAnchor">
<a href="#a-complicated-example" class="anchor"></a>A Complicated Example</h2>
<p>This example finds the fluxes in ecoli_core, just like the previous case. However, this has more detail to show how the package works.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">fbar</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ROI</span>)
<span class="fu"><a href="https://rdrr.io/r/base/try.html">try</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ROI.plugin.ecos</span>))
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">ecoli_core</span>)

<span class="no">roi_model</span> <span class="kw">&lt;-</span> <span class="no">ecoli_core</span> <span class="kw">%&gt;%</span>
  <span class="no">reactiontbl_to_expanded</span> <span class="kw">%&gt;%</span>
  <span class="no">expanded_to_ROI</span>

<span class="co"># First, we need to check that an appropriate solver is available.</span>
<span class="co"># If you don't have an appropriate solver, see the section on installing </span>
<span class="co"># one later in this document.</span>
<span class="kw">if</span>(<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/ROI/man/ROI_applicable_solvers.html">ROI_applicable_solvers</a></span>(<span class="no">roi_model</span>))<span class="kw">&gt;=</span><span class="fl">1</span>){
  <span class="no">roi_result</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ROI/man/ROI_solve.html">ROI_solve</a></span>(<span class="no">roi_model</span>)

  <span class="no">ecoli_core_with_flux</span> <span class="kw">&lt;-</span> <span class="no">ecoli_core</span> <span class="kw">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">flux</span> <span class="kw">=</span> <span class="no">roi_result</span><span class="kw">[[</span><span class="st">'solution'</span>]])
}</pre></div>
<p>This example expands the single data frame model into an intermediate form, the collapses it back to a gurobi model and evaluates it. Then it adds the result as a column, named flux. This longer style is useful because it allows access to the intermediate form. This just consists of three data frames: metabolites, stoichiometry, and reactions. This makes it easy to alter and combine models.</p>
</div>
<div id="functions" class="section level2">
<h2 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h2>
<p><code>fbar</code>â€™s functions can be considered in three groups: convenience wrappers which perform a common workflow all in one go, parsing and conversion functions that form the core of the package and provide extensibility, and functions for gene set processing which allow models to be parameterized by genetic information.</p>
<div id="convenience-wrappers" class="section level4">
<h4 class="hasAnchor">
<a href="#convenience-wrappers" class="anchor"></a>Convenience wrappers</h4>
<p>These functions wrap common workflows. They parse and evaluate models all in one go.</p>
<ul>
<li>
<code>find_fluxes_df</code> - Given a metabolic model as a data frame, return a new data frame with fluxes. For simple FBA, this is what you want.</li>
<li>
<code>find_flux_varability_df</code> - Given a metabolic model as a data frame, return a new data frame with fluxes and variability.</li>
</ul>
</div>
<div id="parsing-and-conversion" class="section level4">
<h4 class="hasAnchor">
<a href="#parsing-and-conversion" class="anchor"></a>Parsing and conversion</h4>
<p>These functions convert metabolic models between different formats.</p>
<ul>
<li>
<code>reactiontbl_to_expanded</code> - Convert a reaction table to an expanded, intermediate, format.</li>
<li>
<code>expanded_to_gurobi</code>, <code>expanded_to_glpk</code> and <code>expanded_to_ROI</code> - Convert a metabolic model in expanded format to the input format for a linear programming library.</li>
<li>
<code>reactiontbl_to_gurobi</code> - Convert a reaction table data frame to gurobi format. This is shorthand for <code>reactiontbl_to_expanded</code> followed by <code>expanded_to_gurobi</code>.</li>
</ul>
</div>
<div id="gene-set-processing" class="section level4">
<h4 class="hasAnchor">
<a href="#gene-set-processing" class="anchor"></a>Gene set processing</h4>
<p>These functions process gene protein reaction mappings.</p>
<ul>
<li>
<code>gene_eval</code> - Evaluate gene sets in the context of particular gene presence levels.</li>
<li>
<code>gene_associate</code> - Apply gene presence levels to a metabolic model.</li>
</ul>
</div>
</div>
<div id="notes-and-faqs" class="section level2">
<h2 class="hasAnchor">
<a href="#notes-and-faqs" class="anchor"></a>Notes and FAQs</h2>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<div id="install-this-package" class="section level4">
<h4 class="hasAnchor">
<a href="#install-this-package" class="anchor"></a>Install this package:</h4>
<div class="sourceCode" id="cb3"><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">'maxconway/fbar'</span>)</pre></div>
</div>
<div id="install-an-additional-linear-programming-solver-optional" class="section level4">
<h4 class="hasAnchor">
<a href="#install-an-additional-linear-programming-solver-optional" class="anchor"></a>Install an additional linear programming solver (optional):</h4>
<p>This package requires a linear programming solver. <code>ROI.plugin.ecos</code> is installed by default, and does the job, but other solvers, such as Gurobi and GLPK are faster. Anything that is supported by the R Optimization Infrastructure package should work.</p>
</div>
</div>
<div id="comparison-with-other-packages" class="section level3">
<h3 class="hasAnchor">
<a href="#comparison-with-other-packages" class="anchor"></a>Comparison with other packages</h3>
<p>The most famous package for constraint based methods is probably COBRA, a Matlab package. If you prefer Matlab to R, youâ€™ll probably want to try that before <code>fbar</code>.</p>
<p>The existing R packages for Flux Balance Analysis include <code>sybil</code> and <code>abcdeFBA</code>. Compared to these packages, <code>fbar</code> is smaller and does less. The aim of <code>fbar</code> is to be more suitable for use as a building block in bioinformatics pipelines. Whereas <code>sybil</code> and to a lesser extent <code>abcdeFBA</code> intend to act as tools with a function for each analysis you might want to do, <code>fbar</code> intends to supply just enough functionality that you can easily construct your analysis with only standard data frame operations.</p>
</div>
<div id="linear-programming-solvers" class="section level3">
<h3 class="hasAnchor">
<a href="#linear-programming-solvers" class="anchor"></a>Linear programming solvers</h3>
<p><code>fbar</code> uses <a href="https://CRAN.R-project.org/package=ROI">ROI</a> by default, which gives access to a number of solvers via plugins. It also supports Rglpk and Gurobi directly. <a href="http://www.gurobi.com">Gurobi</a> is substantially faster than other solvers in my experience, so it is recommended if you can get it (it is commercial, but has a free academic licence).</p>
</div>
<div id="bugs-and-feature-requests" class="section level3">
<h3 class="hasAnchor">
<a href="#bugs-and-feature-requests" class="anchor"></a>Bugs and feature requests</h3>
<p>If you find problems with the package, or thereâ€™s anything that it doesnâ€™t do which you think it should, please submit them to <a href="https://github.com/maxconway/fbar/issues" class="uri">https://github.com/maxconway/fbar/issues</a>. In particular, let me know about optimizers and formats which youâ€™d like supported, or if you have a workflow which might make sense for inclusion as a default convenience function.</p>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=fbar">https://â€‹cloud.r-project.org/â€‹package=fbar</a>
</li>
<li>Browse source code at <br><a href="https://github.com/maxconway/fbar/">https://â€‹github.com/â€‹maxconway/â€‹fbar/â€‹</a>
</li>
<li>Report a bug at <br><a href="https://github.com/maxconway/fbar/issues">https://â€‹github.com/â€‹maxconway/â€‹fbar/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Max Conway <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/maxconway/fbar"><img src="https://travis-ci.org/maxconway/fbar.svg?branch=master" alt="Travis-CI Build Status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Max Conway.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
